{
  "ajax_post": {
    "prefix": "ajax_post",
    "description": "Ajax Poster",
    "body": [
      "<script>",
      "function ${1:this_fun} (${2:str}, ${3:div}) {",
      "if ($2==\"\") {",
      "document.getElementById(div).innerHTML=\"\";",
      "return;",
      "}",
      "var xmlhttp=new XMLHttpRequest();",
      "xmlhttp.onreadystatechange=function() {",
      "if (this.readyState==4 && this.status==200) {",
      "document.getElementById(div).innerHTML=this.responseText;",
      "}",
      "}",
      "xmlhttp.open(\"GET\",\"${4:parser}.php?q=\"+$2,true);",
      "xmlhttp.send();",
      "}",
      "</script>"
    ]
  },
  "toggle_status": {
    "prefix": "toggle_status",
    "description": "Ajax status swapper",
    "body": [
      "/*-- {{{ PUT THIS UP IN THE PHP --*/",
      "$icon_1='la la-check-circle text-success';",
      "$icon_0='la la-times-circle text-error';",
      "$icon_='la la-cog';",
      "if (req('change_status')!='') {",
      "sleep (1);",
      "$id=clean(req('id'),'123');",
      "$type=req('change_status');",
      "if (req('sta')>0) $status=0;",
      "else $status=1;",
      "",
      "if ($type=='${1:THIS_TYPE}') {",
      "if (mysqli_query($sql_con, \"UPDATE ${2:vars} SET ${3:n1}='$status' WHERE id='$id'\") ) $msg.='<h3 id=\"status_txt\" class=\"msg success\">Updated Successfully</h3>';",
      "else $msg.='<h3 id=\"status_txt\" class=\"msg warning\">Failed To Update...please try again in a moment, if this continues please <a href=\"faq.php\">let us know</a></h3>';",
      "}",
      "",
      "echo $msg;",
      "die;",
      "}",
      "",
      "// create the toggle list:",
      "$toggle_this='';",
      "$qry=\"SELECT ${4:*} FROM $2 WHERE ${5:whatever}='$${6:$5}' ORDER BY id DESC\";",
      "$sql = mysqli_query($sql_con, $qry);",
      "while ($row = mysqli_fetch_array($sql)) {",
      "if ($row[\"$3\"]>0) $i_class=$icon_1;",
      "else $i_class=$icon_0;",
      "$toggle_this.=' ####_ADD_WHATEVER_ELSE",
      "<div id=\"x_'. $row[\"id\"] .'\"> <i class=\"'. $i_class .'\" onclick=\"change_status('. $row[\"id\"] .', '. $row[\"$3\"] .', \\'$1\\');\"></i> </div>';",
      "}",
      "/*-- }}} --*/",
      "",
      "<script language=\"JavaScript\" type=\"text/javascript\">",
      "function change_status (id, sta, type){",
      "var xreq = new XMLHttpRequest();",
      "var vars = \"change_status=\"+type+\"&id=\"+id+\"&sta=\"+sta;",
      "xreq.open('POST', '<?php echo $this_page ?>', true);",
      "xreq.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");",
      "xreq.onreadystatechange = function() {",
      "if(xreq.readyState == 4 && xreq.status == 200) {",
      "var return_data = xreq.responseText;",
      "document.getElementById(\"status_msg\").innerHTML = \"return_data\";",
      "if (sta==0) document.getElementById(\"x_\"+id).innerHTML = '<i class=\"<?php echo $icon_1; ?>\" onclick=\"change_status('+ id +', 1, \\''+ type +'\\');\"></i>';",
      "else document.getElementById(\"x_\"+id).innerHTML = '<i class=\"<?php echo $icon_0; ?>\" onclick=\"change_status('+ id +', 0, \\''+ type +'\\');\"></i>';",
      "}",
      "setTimeout(function(){ document.getElementById(\"status_msg\").innerHTML = \"\" } ,3500);",
      "}",
      "xreq.send(vars);",
      "document.getElementById(\"x_\"+id).innerHTML = '<i class=\"<?php echo $icon_; ?>\"></i>';",
      "};",
      "</script>"
    ]
  }
}
